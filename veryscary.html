<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Surprise!</title>
<style>
  :root {
    --flash-duration: 0.12s;
    --bg1: #000;
    --bg2: #fff;
    --text-color: #ff0000;
    --font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  }
  html,body{
    height:100%;
    margin:0;
    background:var(--bg1);
    font-family:var(--font-family);
  }

  /* flashing animation (toggle black/white) */
  @keyframes flash {
    0% { background: var(--bg1); color: var(--bg2); }
    50% { background: var(--bg2); color: var(--bg1); }
    100% { background: var(--bg1); color: var(--bg2); }
  }

  /* when flash-enabled, animate rapidly */
  .flash {
    animation: flash calc(var(--flash-duration) * 2) steps(1) infinite;
  }

  .center {
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    text-align:center;
    padding:20px;
    box-sizing:border-box;
  }

  .message {
    font-size: clamp(28px, 8vw, 120px);
    font-weight:900;
    letter-spacing:2px;
    text-transform:uppercase;
    text-shadow: 0 2px 0 rgba(0,0,0,0.6);
    color: var(--bg2);
  }

  /* optional red accent flash behind text, subtle */
  .accent {
    display:inline-block;
    padding:12px 24px;
    background:rgba(255,0,0,0.06);
    border-radius:6px;
  }

  /* overlay shown when autoplay blocked, invites click to start */
  .overlay {
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    z-index:999;
    backdrop-filter: blur(2px);
  }

  .start-btn {
    background:#111;
    color:#fff;
    border:3px solid #fff;
    padding:18px 30px;
    font-size:20px;
    cursor:pointer;
    border-radius:10px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  }

  .small {
    position:fixed;
    bottom:12px;
    left:12px;
    font-size:13px;
    color:#888;
    z-index:1000;
  }

  /* accessible reduced-motion: disable flashing */
  @media (prefers-reduced-motion: reduce) {
    .flash { animation: none; background: var(--bg1); color:var(--bg2); }
  }
</style>
</head>
<body>
  <div id="page" class="center flash">
    <!-- Default message is intentionally playful; change it below if you want -->
    <div class="message accent" id="message">YOU ARE A GOOF</div>
  </div>

  <div id="overlay" class="overlay" style="display:none">
    <button id="startBtn" class="start-btn">Click to Start â†’</button>
  </div>

  <div class="small">Tip: add <code>?safe=1</code> to the URL to disable flashing.</div>

<script>
/*
  Harmless prank page script:
   - tries to auto-start the tiny audio sting.
   - if blocked, shows overlay that starts when clicked.
   - supports ?safe=1 to disable flashing and reduce motion.
   - To change the displayed text, change `PRANK_TEXT` below.
*/

const PRANK_TEXT = "YOU ARE AN IDIOT"; // change to preferred wording
const SAFE_PARAM = new URLSearchParams(location.search).has('safe');

const page = document.getElementById('page');
const messageEl = document.getElementById('message');
const overlay = document.getElementById('overlay');
const startBtn = document.getElementById('startBtn');

if (SAFE_PARAM) {
  // disable flashing by removing class and making background neutral
  page.classList.remove('flash');
  document.body.style.background = "#222";
  messageEl.style.color = "#fff";
  // reduce animation speed to 0
  document.documentElement.style.setProperty('--flash-duration', '1s');
  // make sure we don't show overlay unless user needs audio
}

// set message (sanitized minimal)
messageEl.textContent = PRANK_TEXT;

// --- Audio: simple WebAudio melody (no external files) ---
let audioCtx;
function createAndPlaySting() {
  if (!window.AudioContext && !window.webkitAudioContext) return Promise.reject();
  audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();

  // short, harmless melody using oscillator + gain envelope
  const now = audioCtx.currentTime;
  const master = audioCtx.createGain();
  master.gain.setValueAtTime(0.0001, now);
  master.connect(audioCtx.destination);

  const notes = [440, 660, 880, 660]; // A4, E5, A5-ish sequence
  const durations = [0.12, 0.12, 0.18, 0.18];

  let t = now;
  notes.forEach((freq, i) => {
    const osc = audioCtx.createOscillator();
    const g = audioCtx.createGain();
    osc.type = (i%2===0) ? 'square' : 'sawtooth';
    osc.frequency.value = freq;
    osc.connect(g);
    g.connect(master);

    g.gain.setValueAtTime(0.0001, t);
    g.gain.exponentialRampToValueAtTime(0.4, t + 0.01);
    g.gain.exponentialRampToValueAtTime(0.0001, t + durations[i]);

    osc.start(t);
    osc.stop(t + durations[i] + 0.02);

    t += durations[i];
  });

  // slight overall fade-out
  master.gain.setValueAtTime(0.001, now);
  master.gain.exponentialRampToValueAtTime(0.0001, t + 0.05);

  return Promise.resolve();
}

// Try autoplay on load
function tryAutoStart() {
  // Some browsers require a user gesture. Attempt to resume context or play and detect rejection.
  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  // attempt to resume (may be allowed already)
  audioCtx.resume().then(() => {
    return createAndPlaySting();
  }).catch((err) => {
    // autoplay blocked
    showOverlay();
  });
}

// overlay to request a user gesture
function showOverlay() {
  if (SAFE_PARAM) {
    // If safe param set, don't force audio or overlay.
    overlay.style.display = 'none';
    return;
  }
  overlay.style.display = 'flex';
  startBtn.focus();
}

startBtn.addEventListener('click', async () => {
  overlay.style.display = 'none';
  try {
    await (audioCtx ? audioCtx.resume() : (audioCtx = new (window.AudioContext || window.webkitAudioContext)(), audioCtx.resume()));
    await createAndPlaySting();
  } catch (e) {
    // ignore failures; still proceed with visual prank
  }
});

// Make a best-effort autoplay after a tiny timeout to allow page gestures
window.addEventListener('load', () => {
  // Small delay to let browsers decide autoplay policy; if blocked we'll show overlay.
  setTimeout(() => {
    tryAutoStart();
  }, 200);
});

// Accessibility: if user has reduced-motion or safe param, ensure no flashing
try {
  const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
  if (mq && mq.matches) {
    page.classList.remove('flash');
  }
} catch(e){}

// Optional: stop flashing after 12 seconds automatically
setTimeout(() => {
  page.classList.remove('flash');
}, 12000);

</script>
</body>
</html>
